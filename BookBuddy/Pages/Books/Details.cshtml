@page "{id:int}"
@model BookBuddy.Pages.Books.DetailsModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<h2>@Model.Book.Title</h2>

<h3>Dodaj mnenje</h3>

<form method="post">
    <textarea asp-for="NewReview.Content" rows="4" maxlength="500"></textarea>
    <span asp-validation-for="NewReview.Content" class="text-danger"></span>

    <button type="submit" class="btn btn-primary mt-2">Dodaj</button>
</form>

<hr />

<h3>Mnenja</h3>

@if (Model.Reviews.Any())
{
    foreach (var r in Model.Reviews)
    {
        <div class="border p-2 mb-3">
            <p>@r.Content</p>
            <small>@r.CreatedAt</small>
        </div>
    }
}
else
{
    <p>Ni še mnenj.</p>
}

<h2>@Model.Book.Title</h2>

<p><strong>Avtor:</strong> @Model.Book.Author</p>
<p><strong>Leto:</strong> @Model.Book.Year</p>
<p><strong>Žanr:</strong> @Model.Book.Genre</p>
<p><strong>Opis:</strong> @Model.Book.Description</p>

@if (Model.Book.Ocena.HasValue)
{
    <p><strong>Ocena:</strong> @Model.Book.Ocena</p>
}
else
{
    <p><strong>Ocena:</strong> še ni ocenjena</p>
}